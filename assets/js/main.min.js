!function(){"use strict";var e,a,t=0,o=!1,n=!1;a={misc:{sidebar_mini_active:!1}},$(window).on("load",(function(){$(".preloader").fadeOut("slow")}));var r=function(){var e=(new Date).getFullYear();$("#pvrWriteCopyrights").text(e)},i=function(){var e,a,r,i,s=$(".sidebar-wrapper");o?$(window).width()>991&&(s.find(".navbar-form").remove(),s.find(".nav-mobile-menu").remove(),o=!1):(a=$("nav").find(".navbar-collapse").first().clone(!0),e="",a.children("ul").each((function(){var a;a=$(this).html(),e+=a})),e='<ul class="nav nav-mobile-menu">'+e+"</ul>",r=s.find(" > .nav"),$(e).insertBefore(r),$(".sidebar-wrapper .dropdown .dropdown-menu > li > a").on("click",(function(e){e.stopPropagation()})),o=!0);n||((i=$(".navbar-toggler")).on("click",(function(){var e,a;1===t?($("html").removeClass("nav-open"),$(".close-layer").remove(),setTimeout((function(){i.removeClass("toggled")}),400),t=0):(setTimeout((function(){i.addClass("toggled")}),430),a=$(".main-panel")[0].scrollHeight,(e=$('<div class="close-layer"></div>')).css("height",a+"px"),e.appendTo(".main-panel"),setTimeout((function(){e.addClass("visible")}),100),e.on("click",(function(){$("html").removeClass("nav-open"),t=0,e.removeClass("visible"),setTimeout((function(){e.remove(),i.removeClass("toggled")}),400)})),$("html").addClass("nav-open"),t=1)})),n=!0)},s=function(e){if(!$(e).attr("data-init")){var a=$(e).attr("data-number"),t=$(e).attr("id"),o=new CountUp(t,0,parseInt(a,10),0,2.5,{useEasing:!0,useGrouping:!0,separator:",",decimal:"."});o.error?console.error(o.error):o.start()}},d=function(e){if(0!=="[data-typeit=true]".length){var a=$.trim($(e).text()),t=$(e).attr("id");$("#"+t).typeIt({whatToType:a,typeSpeed:100,cursor:!0})}},c={init:function(){this.initComponent(),this.initSidebar()},BeforeDocumentReady:function(){r()},initSidebar:function(){var t,n,r,s;t=$(window).width(),$(".sidebar .nav > .has-sub-menu > a").on("click",(function(){var e=$(this).next(".sub-menu");return $(e).hasClass("show")?$(e).collapse("hide"):$(e).collapse("show"),$(".sidebar .nav > li.has-sub-menu > .sub-menu").not(e).collapse("hide"),$(e).on("show.bs.collapse",(function(){$(this).find(".collapse.show").collapse("hide")})),!1})),r=$(".sidebar-wrapper"),void 0!==(s=(e=$(".sidebar")).data("image"))?(n='<div class="sidebar-background" style="background-image: url('+s+') "></div>',e.append(n)):!0===o&&(r.find(".navbar-form").remove(),r.find(".nav-mobile-menu").remove(),o=!1),$(r).perfectScrollbar(),t<=991&&i(),$(".sidebar .collapse").on("in.bs.collapse",(function(){if($(window).width()>991)return!0!==a.misc.sidebar_mini_active})),$("#minimizeSidebar").on("click",(function(){$(this),!0===a.misc.sidebar_mini_active?($("body").removeClass("sidebar-mini"),setTimeout((function(){a.misc.sidebar_mini_active=!1}),300)):($(".sidebar .collapse").collapse("hide").on("hidden.bs.collapse",(function(){$(this).css("height","auto")})),setTimeout((function(){$("body").addClass("sidebar-mini"),$(".sidebar .collapse").css("height","auto"),a.misc.sidebar_mini_active=!0}),300));var e=setInterval((function(){window.dispatchEvent(new Event("resize"))}),180);setTimeout((function(){clearInterval(e)}),1e3)})),$("[data-toggle]").each((function(){var e=$(this).hasClass("card-collapse");$(e).addClass("collapse-preview")})),$('[data-toggle="collapse-hover"]').on("hover",(function(){var e=$(this).attr("data-target");$(this).hasClass("state-open")||($(this).addClass("state-hover"),$(e).css({height:"30px",display:"block",overflow:"hidden"}))}),(function(){var e=$(this).attr("data-target");$(this).removeClass("state-hover"),$(this).hasClass("state-open")||$(e).css({height:"0px"})})).on("click",(function(e){e.preventDefault();var a=$(this).attr("data-target"),t=$(a).children(".card-body").height();$(this).hasClass("state-open")?($(a).css({height:"0px"}),$(this).removeClass("state-open")):($(a).css({height:t+30}),$(this).addClass("state-open"))})),0!==$("[data-toggle='switch']").length&&$("[data-toggle='switch']").bootstrapSwitch(),$("body").on("touchstart.dropdown",".dropdown-menu",(function(e){e.stopPropagation()})),$(window).on("resize",(function(){$(window).width()<=991&&i()}))},initComponent:function(){var e;r(),e=$("[data-click=scroll-top]"),$(document).on("scroll",(function(){$(document).scrollTop()>=200?$(e).addClass("fadeInRight").removeClass("fadeOutRight invisible"):$(e).removeClass("fadeInRight").addClass("fadeOutRight")})),$(e).on("click",(function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},300).animate({scrollTop:40},150).animate({scrollTop:0},100).animate({scrollTop:20},100).animate({scrollTop:0},100).animate({scrollTop:10},50).animate({scrollTop:0},100).animate({scrollTop:5},50).animate({scrollTop:0},100)})),$("[data-count=true]").each((function(){s($(this))})),$("[data-typeit=true]").each((function(){d($(this))})),function(){var e=$("[data-box=refresh]");$(e).on("click",(function(){var e=$(this).attr("data-effect")&&""!=$(this).attr("data-effect")?$(this).attr("data-effect"):"rotateplane",a=$(this).closest(".pvr-box");$(a).waitMe({effect:e,text:"Cargando..",bg:"rgba(255, 255, 255, 0.9)",color:"#9368E9",maxSize:"",waitTime:-1,textPos:"vertical",fontSize:"20px",source:"",onClose:function(){}}),setTimeout((function(){$(a).waitMe("hide")}),2e3)}));var a=$("[data-box=fullscreen]");$(a).on("click",(function(){var e=$(this),a=$(this).closest(".pvr-wrapper");a.hasClass("pvr-full-box")?($(this).text("fullscreen"),$(a).removeClass("pvr-full-box")):($(a).addClass("pvr-full-box"),$(this).text("fullscreen_exit"),$(document).on("keydown",(function(t){27===t.keyCode&&($(e).text("fullscreen"),$(a).removeClass("pvr-full-box"))})))}));var t=$("[data-box=close]");$(t).on("click",(function(){var e=$(this).closest(".pvr-wrapper");$(e).addClass("removed-item").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",(function(e){$(this).remove()}))}))}()}};c.BeforeDocumentReady(),$((function(){c.init()}));class l{static getSiteInfo(e){$.ajax({url:"ajax/get-site-info",type:"POST",data:{hook:"jserp_hook",action:"get"}}).done((a=>{200===a.status&&e.call(this,a.data)})).fail((e=>!1))}static loader(e="",a="body"){if(""===e)$(a).waitMe();else{if("hide"!==e)return!1;$(a).waitMe(e)}return!0}static toast(e,a="success"){switch(toastr.options={closeButton:!0,debug:!1,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:500,hideDuration:500,timeOut:7e3,extendedTimeOut:1e3,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},a){case"error":toastr.error(e,"¡Upss!");break;case"info":toastr.info(e,"Atención");break;case"warning":toastr.warning(e,"Cuidado");break;default:toastr.success(e,"Bien hecho")}return!0}static reload(e=1500){setTimeout((()=>{window.location.reload()}),e)}static get_err_msg(){return"Hubo un error en la petición, intenta de nuevo"}static show_error(e="Hubo un error, intenta de nuevo"){this.toast(e,"error")}static get_csrf(){return this.csrf="Ali baba!",$.get("ajax/get_csrf").done((e=>(this.csrf=e.data.csrf,this.csrf))).fail((e=>(this.csrf=!1,this.csrf))).always((()=>(this.csrf=!1,this.csrf))),this.csrf}}class u{static init(){$("body").on("click",".do_pick_destinatario",this.do_load_pick_destinatario_modal),$("body").on("submit","#do_add_destinatario_form",this.do_pick_destinatario)}static do_load_pick_destinatario_modal(e){e.preventDefault();$(e.currentTarget);let a="do_pick_destinatario_modal";$.ajax({url:"ajax/do_load_pick_destinatario_modal",type:"post",dataType:"json",cache:!1,data:{action:"load_modal",hook:"js_hook",modal:a},beforeSend:()=>{l.loader()}}).done((e=>{200===e.status?($("#"+a).remove(),$("body").append(e.data),$(".select2-basic-single").select2(),$("#"+a).modal("show")):l.toast(e.msg,"error")})).fail((e=>{l.show_error()})).always((()=>{l.loader("hide")}))}static do_pick_destinatario(e){e.preventDefault();let a=$(e.currentTarget),t=$('[name="destinatario"]',a).val();$.ajax({url:"ajax/do_add_destinatario",type:"post",dataType:"json",data:{action:"add_destinatario",hook:"js_hook",email:t},beforeSend:()=>{l.loader()}}).done((e=>{200===e.status?(l.toast(e.msg),u.do_reload_destinatarios()):l.toast(e.msg,"error")})).fail((e=>{l.show_error()})).always((()=>{l.loader("hide")}))}static do_reload_destinatarios(){let e=$(".wrapper_email_destinatarios");$.ajax({url:"ajax/do_reload_destinatarios",type:"post",dataType:"json",data:{action:"reload_destinatarios",hook:"js_hook"},beforeSend:()=>{l.loader()}}).done((a=>{200===a.status?e.html(a.data):l.toast(a.msg,"error")})).fail((e=>{l.show_error()})).always((()=>{l.loader("hide")}))}}class p{static init(){this.do_get_categorias(),this.do_get_categorias_options(),$("body").on("click",".do_reload_categorias",this.do_get_categorias),$("body").on("click",".do_reload_categorias",this.do_get_categorias_options),$("body").on("submit",".do_add_categoria",this.do_add_categoria),$("body").on("click",".do_delete_categoria",this.do_delete_categoria),$("body").on("click",".do_open_update_modal",this.do_open_update_modal),$("body").on("submit",".do_update_categoria",this.do_update_categoria)}static do_get_categorias(){let e=$(".wrapper_get_categorias");0!==e.length&&$.ajax({url:"ajax/do_get_categorias",type:"post",dataType:"json",data:{action:"get",hook:"jserp_hook"},beforeSend:()=>{e.waitMe()}}).done((a=>{200===a.status?e.html(a.data.html):l.toast(a.msg,"error")})).fail((e=>{l.show_error()})).always((()=>{e.waitMe("hide")}))}static do_add_categoria(e){e.preventDefault();let a=$(e.currentTarget),t=new FormData(a.get(0));$('[name="id_padre"]');t.append("hook","jserp_hook"),t.append("action","post"),$.ajax({url:"ajax/do_add_categoria",type:"post",dataType:"json",processData:!1,contentType:!1,data:t,beforeSend:()=>{l.loader()}}).done((e=>{201===e.status?(a.trigger("reset"),l.toast(e.msg),p.do_get_categorias(),p.do_get_categorias_options()):l.toast(e.msg,"error")})).fail((e=>{l.show_error()})).always((()=>{l.loader("hide")}))}static do_delete_categoria(e){e.preventDefault();let a=$(e.currentTarget).data("id");$('[name="id_padre"]');confirm("¿Estás seguro?")&&$.ajax({url:"ajax/do_delete_categoria",type:"post",dataType:"json",data:{id:a,hook:"jserp_hook",action:"post"},beforeSend:()=>{l.loader()}}).done((e=>{200===e.status?(l.toast(e.msg),p.do_get_categorias(),p.do_get_categorias_options()):l.toast(e.msg,"error")})).fail((e=>{l.show_error()})).always((()=>{l.loader("hide")}))}static do_open_update_modal(e){let a=$(e.currentTarget).data("id"),t=$("#update_modal"),o=$(".wrapper_update_categoria");l.loader(),axios.post("ajax/do_open_update_modal",{id:a,hook:"jserp_hook",action:"get"}).then((e=>{200===e.data.status?(o.html(e.data.data),t.modal("show")):l.toast(e.data.msg,"error")})).catch((e=>{l.show_error()})).finally((()=>{l.loader("hide")}))}static do_update_categoria(e){e.preventDefault();let a=$(e.currentTarget),t=new FormData(a.get(0)),o=($('.do_add_categoria select[name="id_padre"]'),$("#update_modal")),n=$(".wrapper_update_categoria");t.append("hook","jserp_hook"),t.append("action","post"),$.ajax({url:"ajax/do_update_categoria",type:"post",dataType:"json",processData:!1,contentType:!1,data:t,beforeSend:()=>{l.loader()}}).done((e=>{200===e.status?(l.toast(e.msg),o.modal("hide"),n.html(""),p.do_get_categorias(),p.do_get_categorias_options()):l.toast(e.msg,"error")})).fail((e=>{l.show_error()})).always((()=>{l.loader("hide")}))}static do_get_categorias_options(){let e=$('form.do_add_categoria select[name="id_padre"]');0!==e.length&&(e.html(""),console.log(e),$.ajax({url:"ajax/do_get_categorias_options",type:"post",dataType:"json",data:{hook:"jserp_hook",action:"get"},beforeSend:()=>{e.waitMe()}}).done((a=>{200===a.status?(e.html('<option value="0">Ninguna</option>'),e.append(a.data)):l.toast(a.msg,"error")})).fail((e=>{l.show_error()})).always((()=>{e.waitMe("hide")})))}}class m{static init(){this.do_get_productos(),$("body").on("click",".do_refresh_productos",this.do_get_productos),$("body").on("submit",".do_add_producto",this.do_add_producto)}static do_get_productos(){let e=$(".wrapper_get_productos");0!==e.length&&$.ajax({url:"ajax/do_get_productos",type:"post",dataType:"json",data:{action:"get",hook:"jserp_hook"},beforeSend:()=>{e.waitMe()}}).done((a=>{200===a.status?e.html(a.data.html):(e.html("Hubo un error en la petición"),l.toast(a.msg,"error"))})).fail((a=>{e.html(l.get_err_msg()),l.show_error()})).always((()=>{e.waitMe("hide")}))}static do_add_producto(e){e.preventDefault();let a=$(e.currentTarget),t=new FormData(a.get(0)),o=$("#add_producto_modal");t.append("hook","jserp_hook"),t.append("action","post"),$.ajax({url:"ajax/do_add_producto",type:"post",dataType:"json",processData:!1,cache:!1,contentType:!1,data:t,beforeSend:()=>{a.waitMe()}}).done((e=>{201===e.status?(o.modal("hide"),a.trigger("reset"),l.toast(e.msg),m.do_get_productos()):l.toast(e.msg,"error")})).fail((e=>{l.show_error()})).always((()=>{a.waitMe("hide")}))}static do_get_producto(e){e.preventDefault();let a=$(e.currentTarget).data("id"),t=$("#single_producto_modal"),o=$(".wrapper_single_producto_modal");$.ajax({url:"ajax/do_get_producto",type:"post",dataType:"json",cache:!1,data:{hook:"jserp_hook",action:"get",id:a},beforeSend:()=>{o.waitMe()}}).done((e=>{200===e.status?(t.modal("show"),o.html(e.data.html)):(o.html(l.get_err_msg()),l.toast(e.msg,"error"))})).fail((e=>{o.html(l.get_err_msg()),l.show_error()})).always((()=>{o.waitMe("hide")}))}}$(document).ready(class{static init(){this.do_system_backup(),this.do_db_backup(),this.do_request_user_sign(),this.do_heartbeat(),this.do_geolocate_user(),class{static init(){$("#email_sitename").on("keyup",this.email_sitename)}static email_sitename(e){let a=$(e.currentTarget).val(),t=$(".title_default").html();$(".wrapper_email_sitename .title").html(a.length>0?a:t)}}.init(),class{static init(){$("body").on("click","#do_add_departamento",this.load_add_modal),$("body").on("submit","#do_add_departamento_form",this.add)}static load_add_modal(e){$(e.currentTarget);let a="load_modal",t="js_hook",o="do_add_departamento_modal",n=`#${o}`;$.ajax({url:"ajax/do_load_add_departamento_modal",type:"post",dataType:"json",cache:!1,data:{action:a,hook:t,modal:o},beforeSend:()=>{l.loader()}}).done((e=>{200===e.status?($(n).remove(),$("body").append(e.data),$(n).modal("show")):l.toast(e.msg,"error")})).fail((e=>{l.show_error()})).always((()=>{l.loader("hide")}))}static add(e){e.preventDefault();let a=$(e.currentTarget),t="js_hook",o="add",n=a.serialize();$.ajax({url:"ajax/do_add_departamento",type:"post",dataType:"json",cache:!1,data:{action:o,hook:t,data:n},beforeSend:()=>{l.loader()}}).done((e=>{201===e.status?(a.trigger("reset"),l.toast(e.msg),l.reload()):l.toast(e.msg,"error")})).fail((e=>{l.show_error()})).always((()=>{l.loader("hide")}))}}.init(),class{static init(){this.do_keep_locking()}static do_keep_locking(){if(0!==$(".do_keep_locking").length){let e=$(".do_keep_locking"),a=e.data("tabla"),t=e.data("id"),o="keep_locking",n="js_hook";$.ajax({url:"ajax/do_keep_locking",type:"post",dataType:"json",cache:!1,data:{action:o,hook:n,tabla:a,id_registro:t}}).done((e=>{200===e.status&&setTimeout((()=>{this.do_keep_locking()}),1e4)})).fail((e=>{})).always((()=>{}))}}}.init(),u.init(),class{static init(){$("body").on("change",".do_load_rfc",this.do_load_rfc)}static do_load_rfc(e){let a=$(e.currentTarget),t=$('input[name="rfc"]'),o="XEXX010101000",n="XAXX010101000";switch(a.val()){case"rfc_p_general":t.val(n);break;case"rfc_extranjero":t.val(o);break;default:t.val("")}}}.init(),p.init(),m.init()}static do_system_backup(e){$(".do_system_backup").on("click",(e=>{$(e.currentTarget);$.ajax({url:"ajax/do_system_backup",type:"POST",dataType:"JSON",data:{hook:"jserp_hook",action:"do_system_backup"},beforeSend:()=>{l.loader()}}).done((e=>{200===e.status?l.toast(e.msg):l.toast(e.msg,"error")})).fail((e=>{l.toast("Hubo un error, intenta de nuevo","error")})).always((()=>{l.loader("hide")}))}))}static do_db_backup(e){$(".do_db_backup").on("click",(e=>{$(e.currentTarget);$.ajax({url:"ajax/do_db_backup",type:"POST",dataType:"JSON",data:{hook:"jserp_hook",action:"do_db_backup"},beforeSend:()=>{l.loader()}}).done((e=>{200===e.status?l.toast(e.msg):l.toast(e.msg,"error")})).fail((e=>{l.toast("Hubo un error, intenta de nuevo","error")})).always((()=>{l.loader("hide")}))}))}static do_request_user_sign(){$(".do_request_user_sign").on("click",(e=>{let a=$(e.currentTarget).data("id");$.ajax({url:"ajax/do_request_user_sign",type:"POST",dataType:"JSON",data:{id_usuario:a,action:"do_request_user_sign",hook:"js_hook"},beforeSend:()=>{l.loader()}}).done((e=>{200===e.status?l.toast(e.msg):l.toast(e.msg,"error")})).fail((e=>{l.toast("Hubo un error, intenta de nuevo","error")})).always((()=>{l.loader("hide")}))}))}static do_heartbeat(){this.call_heartbeat(),setInterval((()=>{this.call_heartbeat()}),6e4)}static call_heartbeat(){$.ajax({url:"ajax/do_heartbeat",type:"POST",dataType:"JSON",cache:!1,data:{action:"do_heartbear",hook:"js_hook"}}).done((e=>{200===e.status&&console.log(`JSERP: ${e.msg}`)})).fail((e=>{})).always((()=>{}))}static do_geolocate_user(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.geolocate):l.toast("Debes habilitar la geolocalización GPS de tu navegador","error")}static geolocate(e){e.coords.latitude,e.coords.longitude;console.log(e)}}.init());$(document).ready(class{static init(){this.do_p_contacto(),this.do_p_add_reporte()}static do_p_contacto(){$("body").on("submit",".do_p_contacto",(e=>{e.preventDefault();let a=$(e.currentTarget),t=new FormData(a.get(0));t.append("action","add"),t.append("hook","js_hook"),$.ajax({url:"ajax/do_p_contacto",type:"post",dataType:"json",contentType:!1,cache:!1,processData:!1,data:t,beforeSend:()=>{l.loader()}}).done((e=>{200===e.status?(l.toast(e.msg),a.trigger("reset")):l.toast(e.msg,"error")})).fail((e=>{l.show_error()})).always((()=>{l.loader("hide")}))}))}static do_p_add_reporte(){$("body").on("submit",".do_p_add_reporte",(e=>{e.preventDefault();let a=$(e.currentTarget),t=new FormData(a.get(0));t.append("action","add"),t.append("hook","js_hook"),$.ajax({url:"ajax/do_p_add_reporte",type:"post",dataType:"json",contentType:!1,cache:!1,processData:!1,data:t,beforeSend:()=>{l.loader()}}).done((e=>{201===e.status?(l.toast(e.msg),a.trigger("reset")):l.toast(e.msg,"error")})).fail((e=>{l.show_error()})).always((()=>{l.loader("hide")}))}))}}.init());(class{static init(){this.whatsnew()}static whatsnew(){}static get(e){return $.ajax({url:e,type:"POST",data:{hook:"jserp_hook",action:"get"}})}}).init();class h{constructor(){var e,a,t;t=!1,(a="doSubmit")in(e=this)?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t}static init(){0!==$("#do_pay_subscription").lenght&&this.pay()}static pay(){Mercadopago.setPublishableKey("APP_USR-3eb610fa-ea25-4498-abcb-121657f22c92"),Mercadopago.getIdentificationTypes(),$("#cardNumber").on("focus keyup",this.guessingPaymentMethod),$("#do_pay_subscription").on("submit",this.doPay)}static guessingPaymentMethod(e){let a=$("#cardNumber").val();a=a.replace(/\s/g,""),"keyup"==e.type?a.length>=6&&Mercadopago.getPaymentMethod({bin:a},h.setPaymentMethodInfo):setTimeout((()=>{a.length>=6&&Mercadopago.getPaymentMethod({bin:a},h.setPaymentMethodInfo)}),100)}static setPaymentMethodInfo(e,a){let t=$("#paymentMethodId");200===e&&(t.val(a[0].id),Mercadopago.getIssuers(t.val(),((e,a)=>{if(200!==e)return!1;a.forEach((e=>{let a=document.getElementById("issuerId"),t=document.createElement("option");t.value=e.id,t.text=e.name,a.appendChild(t)}))})))}static doPay(e){e.preventDefault();let a=$(e.currentTarget);return Mercadopago.createToken(a,h.sdkResponseHandler),!1}static sdkResponseHandler(e,a){if(200!=e&&201!=e)return toastr.error(a.message,"Hubo un error"),!1;let t=$("#do_pay_subscription"),o=$("#token"),n=$("#do_pay_now_button");o.val(a.id),n.attr("disabled",!0),$.ajax({url:"ajax/do_pay_subscription",cache:!1,type:"POST",dataType:"json",data:{data:t.serialize()},beforeSend:()=>{t.waitMe()}}).done((e=>{200===e.status?"approved"===e.data.status?(swal("¡Bien hecho!","Pago realizado con éxito, no cierres la ventana","success"),t.trigger("reset"),setTimeout((()=>{window.location=e.data.on_approved}),2500)):"in_process"===e.data.status?(swal("¡Espera!","Necesitamos verificar tu pago, no cierres la ventana...","warning"),t.trigger("reset"),setTimeout((()=>{window.location=e.data.in_process}),2500)):"rejected"===e.data.status&&(toastr.error("Pago rechazado, intenta de nuevo","Hubo un error"),t.trigger("reset"),setTimeout((()=>{window.location.reload()}),1500)):toastr.error(e.msg,"Hubo un error")})).always((()=>{setTimeout((()=>{t.waitMe("hide"),n.attr("disabled",!1)}),2e3)}))}}(class{static init(){this.submit_consulting_form()}static submit_consulting_form(){$("body").on("submit","#inf_consulting_form",(e=>{e.preventDefault();let a=$(e.currentTarget),t=new FormData(a.get(0));t.append("hook","shippr"),t.append("action","post"),$.ajax({url:"ajax/do_send_consulting_form",type:"POST",processData:!1,contentType:!1,cache:!1,data:t,beforeSend:()=>{l.loader()}}).fail((e=>!1)).done((e=>{200===e.status?(toastr.success("¡Mensaje enviado con éxito, gracias!"),a.trigger("reset")):toastr.error(e.msg)})).always((()=>{l.loader("hide")}))}))}}).init(),h.init();$(document).ready((function(){0!==$("#calculadora-peso-volumetrico").length&&function(){let a=0,t=0,o=0,n=0;const r=$('[name="alto"]'),i=$('[name="ancho"]'),s=$('[name="largo"]'),d=$('[name="peso_vol"]');let c=$("#des_cp"),l=c.val();r.on("blur",(function(r){a=$(this).val().replace(/,/g,""),n=a*t*o/5e3,d.val(n),e(n,l)})),i.on("blur",(function(r){t=$(this).val().replace(/,/g,""),n=a*t*o/5e3,d.val(n),e(n,l)})),s.on("blur",(function(r){o=$(this).val().replace(/,/g,""),n=a*t*o/5e3,d.val(n),e(n,l)})),c.on("blur",(function(r){l=$("#des_cp").val(),n=a*t*o/5e3,d.val(n),e(n,l)}))}();function e(e,a){if(0===e)return!1;$.ajax({url:"ajax/calcular-opciones-productos",type:"POST",dataType:"JSON",data:{peso_volumetrico:e,hook:"js_hook",des_cp:a,action:"get-products"},beforeSend:function(){$("body").waitMe()}}).done((e=>{200===e.status?$("#calcular-opciones-wrapper").html(e.data):l.toast(e.msg,"error")})).fail((e=>{l.show_error()})).always((()=>{$("body").waitMe("hide")}))}$("#copy-clipboard").on("click",(function(){let e=$(this).data("source"),a=$(e).val(),t=$("<input>");return $("body").append(t),t.val(a).select(),document.execCommand("copy"),t.remove(),swal("¡Bien hecho!","Copiado con éxito","success"),!0})),$("body").on("change",".va-custom-radio",(function(){let e=$(this);e.parent().parent().find(".va-custom-radio").removeClass("va-custom-radio-selected"),e.addClass("va-custom-radio-selected")})),$("body").on("change",".va-custom-radio",(function(){let e=$(this).find("input").val();$.ajax({url:"ajax/update_payment_type",type:"POST",dataType:"JSON",data:{hook:"va-hook",action:"update-payment",type:e},beforeSend:function(){$(".cart-wrapper").waitMe()}}).done((function(e){return 200===e.status||(swal("Ooops!",e.msg,"error"),!1)})).fail((function(e){})).always((function(){$(".cart-wrapper").waitMe("hide")}))})),$("#envios-sync-to-aftership").on("click",(function(){$.ajax({url:"ajax/envios_sync_to_aftership",type:"POST",dataType:"JSON",data:{hook:"js_hook",action:"sync-shipments"},beforeSend:function(){$("body").waitMe()}}).done((e=>403===e.status||400===e.status?(toastr.error(e.msg),!1):void(200===e.status&&toastr.success(e.msg)))).fail((e=>{toastr.error("Hubo un error, intenta de nuevo")})).always((()=>{$("body").waitMe("hide")}))})),$("body").on("click",".do-track-shipment",(function(){let e=$(this).data("id");if("undefined"===e)return!1;$.ajax({url:"ajax/envios_track",type:"POST",dataType:"JSON",data:{hook:"js_hook",action:"track-shipment",id:e},beforeSend:function(){$("body").waitMe()}}).done((e=>200===e.status?($("body").append(e.data),$("#tracking-shipment-real-time").modal("show"),$("#tracking-shipment-real-time").on("hidden.bs.modal",(function(e){$(this).modal("dispose"),$(this).remove()})),!0):(toastr.error(e.msg),!1))).fail((e=>{toastr.error("Hubo un error, intenta de nuevo")})).always((()=>{$("body").waitMe("hide")}))})),$("body").on("click",".do-open-edit-venta-modal",(function(){let e=$(this).data("folio");$.ajax({url:"ajax/do-open-edit-venta-modal",type:"POST",dataType:"JSON",data:{hook:"js_hook",action:"open-modal",folio:e},beforeSend:function(){$("body").waitMe()}}).done((e=>200===e.status?($("body").append(e.data),$("#edit-venta-modal").modal("show"),$("#edit-venta-modal").on("hidden.bs.modal",(function(e){$(this).modal("dispose"),$(this).remove()})),!0):(toastr.error(e.msg),!1))).fail((e=>{toastr.error("Hubo un error, intenta de nuevo")})).always((()=>{$("body").waitMe("hide")}))})),$("body").on("submit","#do-save-changes-venta-form",(function(e){e.preventDefault();let a=$("#edit-venta-modal"),t=$(this).serialize();$.ajax({url:"ajax/do-save-changes-venta-modal",type:"POST",dataType:"JSON",data:{hook:"js_hook",action:"save-changes",data:t},beforeSend:function(){$("body").waitMe()}}).done((e=>200===e.status?(toastr.success(e.msg),setTimeout((()=>{window.location.reload()}),1e3),!0):(toastr.error(e.msg),!1))).fail((e=>{toastr.error("Hubo un error, intenta de nuevo")})).always((()=>{$("body").waitMe("hide"),a.modal("hide")}))}))}));if(class{static init(){this.event_handlers(),this.load_create_modal(),this.load_get_modal(),this.default_addresses(),this.submit_create_form()}static load_get_modal(){$("body").on("click",".do_u_get_direccion_modal",(e=>{e.preventDefault();let a=$(e.currentTarget).data("id");$.ajax({url:"ajax/do_u_get_direccion_modal",type:"POST",data:{hook:"va-hook",action:"get",id:a},beforeSend:()=>{$("body").waitMe()}}).done((e=>{200===e.status?($("#get_direccion_modal").remove(),$("body").append(e.data),$("#get_direccion_modal").modal("show")):toastr.error(e.msg,"Hubo un error")})).fail((e=>{toastr.error("Hubo un error, itenta de nuevo")})).always((()=>{$("body").waitMe("hide")}))}))}static load_create_modal(){$("body").on("click",".do_u_create_direccion_modal",(e=>{let a;$(e.currentTarget);if(a)return!1;a=!0,$.ajax({url:"ajax/do_u_create_direccion_modal",type:"POST",data:{hook:"va-hook",action:"create"},beforeSend:()=>{$("body").waitMe()}}).done((e=>{200===e.status?($("#create_direccion_modal").remove(),$("body").append(e.data),$("#create_direccion_modal").modal("show")):toastr.error(e.msg,"Hubo un error")})).fail((e=>{toastr.error("Hubo un error, itenta de nuevo")})).always((()=>{$("body").waitMe("hide"),a=!1}))}))}static submit_create_form(){$("body").on("submit","#do_u_create_direccion_form",(e=>{e.preventDefault();let a=$(e.currentTarget);a.serialize();$('[type="submit"]',a).attr("disabled",!1),this.create(a,(()=>{a.trigger("reset"),toastr.success("Dirección agregada con éxito"),setTimeout((()=>{window.location.reload()}),1e3)}))}))}static event_handlers(){$("body").on("click",".do_u_editar_direccion_modal",(e=>{e.preventDefault();let a=$(e.currentTarget).data("id");this.load_update_modal(a,(e=>{$("#update_direccion_modal").remove(),$("body").append(e.data),$("#update_direccion_modal").modal("show")}))})),$("body").on("submit","#do_u_update_direccion_form",(e=>{e.preventDefault();let a=$(e.currentTarget),t=(a.serialize(),$('[type="submit"]',a));t.attr("disabled",!0),this.update(a,(e=>{t.attr("disabled",!1),toastr.success("Dirección actualizada con éxito"),setTimeout((()=>{window.location.reload()}),1e3)}))})),$("body").on("click",".do_u_delete_direccion",(e=>{e.preventDefault();let a=$(e.currentTarget).data("id");if(!confirm("¿Estás seguro?"))return!1;this.delete(a,((e,a)=>{toastr.success("Dirección borrada con éxito"),setTimeout((()=>{window.location.reload()}),1e3)}))})),$("body").on("change",".do_choose_direccion_destinatario",(e=>{e.preventDefault();let a=$(e.currentTarget),t=$("#des_cp"),o=$("#des_colonia"),n=$("#des_ciudad"),r=$("#des_estado"),i=a.val();if(""==i)return t.val(""),o.html(""),o.attr("disabled",!0),o.attr("readonly",!0),n.val(""),r.val(""),!1;this.get(i,(e=>{t.val(""),o.attr("disabled",!1),o.html('<option value="'+e.data.colonia+'">'+e.data.colonia+"</option>"),$.each(e.data,((e,a)=>{$('[name="destinatario['+e+']"]').val(a)}))}))}))}static load_update_modal(e,a){let t;if(t)return!1;t=!0,$.ajax({url:"ajax/do_u_update_direccion_modal",type:"POST",data:{hook:"va-hook",action:"update",id:e},beforeSend:()=>{$("body").waitMe()}}).done((e=>{200===e.status?a(e):toastr.error(e.msg,"Hubo un error")})).fail((e=>{toastr.error("Hubo un error, itenta de nuevo")})).always((()=>{$("body").waitMe("hide"),t=!1}))}static default_addresses(){$("body").on("click",".do_u_delete_remitente_defecto",(e=>{let a=$(e.currentTarget),t=a.data("id");a.attr("disabled",!0),this.delete_as_default(t,(()=>{toastr.success("Dirección actualizada con éxito"),setTimeout((()=>{window.location.reload()}),1e3)}))})),$("body").on("click",".do_u_make_remitente_defecto",(e=>{let a=$(e.currentTarget),t=a.data("id");a.attr("disabled",!0),this.make_default(t,(()=>{toastr.success("Dirección actualizada con éxito"),setTimeout((()=>{window.location.reload()}),1e3)}))}))}static delete_as_default(e,a){let t;if(t)return!1;t=!0,$.ajax({url:"ajax/do_u_delete_remitente_defecto",type:"POST",data:{hook:"va-hook",action:"update",id:e},beforeSend:()=>{$("body").waitMe()}}).done((e=>{200===e.status?a():toastr.error(e.msg,"Hubo un error")})).fail((e=>{toastr.error("Hubo un error, itenta de nuevo")})).always((()=>{$("body").waitMe("hide"),t=!1}))}static make_default(e,a){let t;if(t)return!1;t=!0,$.ajax({url:"ajax/do_u_make_remitente_defecto",type:"POST",data:{hook:"va-hook",action:"update",id:e},beforeSend:()=>{$("body").waitMe()}}).done((e=>{200===e.status?a():toastr.error(e.msg,"Hubo un error")})).fail((e=>{toastr.error("Hubo un error, itenta de nuevo")})).always((()=>{$("body").waitMe("hide"),t=!1}))}static create(e,a){let t,o=e.serialize();if(t)return!1;t=!0,$.ajax({url:"ajax/do_u_create_direccion",type:"POST",data:{hook:"va-hook",action:"create",data:o},beforeSend:()=>{$("body").waitMe()}}).done((e=>{201===e.status?a():toastr.error(e.msg,"Hubo un error")})).fail((e=>{toastr.error("Hubo un error, itenta de nuevo")})).always((()=>{$("body").waitMe("hide"),t=!1}))}static update(e,a){let t,o=e.serialize();if(t)return!1;t=!0,$.ajax({url:"ajax/do_u_update_direccion",type:"POST",data:{hook:"va-hook",action:"update",data:o},beforeSend:()=>{$("body").waitMe()}}).done((e=>{200===e.status?a(e):toastr.error(e.msg,"Hubo un error")})).fail((e=>{toastr.error("Hubo un error, itenta de nuevo")})).always((()=>{$("body").waitMe("hide"),t=!1}))}static delete(e,a){let t;if(t)return!1;t=!0,$.ajax({url:"ajax/do_u_delete_direccion",type:"POST",data:{hook:"va-hook",action:"delete",id:e},beforeSend:()=>{$("body").waitMe()}}).done((e=>{200===e.status?a(e.status,e.data):toastr.error(e.msg,"Hubo un error")})).fail((e=>{toastr.error("Hubo un error, itenta de nuevo")})).always((()=>{$("body").waitMe("hide"),t=!1}))}static get(e,a){let t;if(t)return!1;t=!0,$.ajax({url:"ajax/do_get_user_address",type:"POST",data:{hook:"va-hook",action:"get",id:e},beforeSend:()=>{$("body").waitMe()}}).done((e=>{200===e.status?a(e):toastr.error(e.msg,"Hubo un error")})).fail((e=>{toastr.error("Hubo un error, itenta de nuevo")})).always((()=>{$("body").waitMe("hide"),t=!1}))}}.init(),$(document).ready((function(){if(0!==$("#login-form").length&&$("#login-form").on("submit",(function(e){e.preventDefault();var a=$(this).serialize();$.ajax({url:"ajax/login",dataType:"JSON",type:"POST",data:"accion=login&"+a,beforeSend:function(){$("body").waitMe()}}).done((e=>200===e.status?(swal("¡Bien!",e.msg,"success"),setTimeout((function(){window.location=e.data.redirect_to}),2e3),!0):(swal("Whoops!",e.msg,"error"),!1))).fail((e=>{swal("Whoops!",res.msg,"error")})).always((()=>{$("body").waitMe("hide")}))})),0!==$("#actualizar-reporte").length&&$("#actualizar-reporte").on("submit",(function(e){if(e.preventDefault(),"none"==$("select",this).val())return swal("Whoops!","Selecciona una opción","error"),!1;var a=$(this).serialize();$.ajax({url:"ajax/reportesAjax",dataType:"JSON",type:"POST",data:"accion=actualizar&"+a,success:function(e){200==e.status&&(swal("Bien!",e.mensaje,"success"),setTimeout((function(){window.location="reportes"}),1e3)),400==e.status&&swal("Whoops!",e.mensaje,"error")}})})),0!==$("#cargar-equipo").length&&$("#cargar-equipo").on("change",(function(e){var a,t;e.preventDefault();var o=$("#generar-orden , #generar-checklist , #generar-cotizacion"),n=$(this);if(a=n.val(),"equipos",t="cargar_un_equipo","none"==n.val())return swal("Selecciona un equipo valido"),!1;$.ajax({url:"ajax/"+t,type:"POST",dataType:"JSON",data:"accion="+t+"&id="+a+"&tabla=equipos",beforeSend:function(){$(o).waitMe({effect:"orbit",time:-1})},success:function(e){return $(o).waitMe("hide"),$("input[name='tipo']",o).val(e.equipo.tipo),$("input[name='marca']",o).val(e.equipo.marca),$("input[name='serie']",o).val(e.equipo.serie),$("input[name='modelo']",o).val(e.equipo.modelo),$("input[name='razonSocial']",o).val(e.equipo.razonSocial),$("input[name='facturarA']",o).val(e.equipo.razonSocial),$("input[name='sucursal']",o).val(e.equipo.s_nombre),$("input[name='direccion']",o).val(e.equipo.s_direccion),$("input[name='rfc']",o).val(e.equipo.rfc),!0}})})),0!==$("#generar-orden").length&&$("#generar-orden").on("submit",(function(e){var a=$(this);return"none"==$("select[name='folio']",a).val()?(swal("Whoops!","Selecciona un folio valido","error"),!1):"none"==$("select[name='tipoDeServicio']",a).val()?(swal("Whoops!","Selecciona un servicio valido","error"),!1):"none"==$("select[name='equipo']",a).val()?(swal("Whoops!","Selecciona un equipo valido","error"),!1):"none"==$("select[name='sistema_revisado']",a).val()?(swal("Whoops!","Selecciona el sistema revisado","error"),!1):void 0})),0!==$("#generar-checklist").length&&$("#generar-checklist").on("submit",(function(e){var a=$(this);return"none"==$("select[name='folio']",a).val()?(swal({title:"Whoops!",text:"Selecciona un reporte valido",type:"error",timer:2e3}),!1):$("input[name='folio_orden']",a).val().length<6?(swal({title:"Whoops!",text:"Ingresa un folio de orden de servicio valido",type:"error",timer:2e3}),!1):"none"==$("select[name='ronda']",a).val()?(swal({title:"Whoops!",text:"Selecciona la ronda de mantenimiento",type:"error",timer:2e3}),!1):"none"==$("select[name='equipo']",a).val()?(swal({title:"Whoops!",text:"Selecciona un tipo de servicio valido",type:"error",timer:2e3}),!1):void 0})),0!==$("#agregar-concepto").length){$("input[name='precio']","#agregar-concepto").on("blur",(function(e){var a=$(this).val(),t=$("input[name='cantidad']","#agregar-concepto").val();$("input[name='importe']","#agregar-concepto").val(a*t)})),$("input[name='cantidad']","#agregar-concepto").on("change",(function(e){var a=$("input[name='precio']","#agregar-concepto").val(),t=$(this).val();$("input[name='importe']","#agregar-concepto").val(a*t)}));var e=function(){$.ajax({url:"ajax/cotizador",dataType:"JSON",type:"POST",data:"accion=cargar_conceptos",success:function(e){200==e.status&&($(".persona").html("fisica"===e.persona?"Persona Física":"Persona Moral"),$("input[name='id']").val(e.token),$(".subtotal").val(e.subtotal),$(".descuento").val(e.descuento),$(".impuestos").val(e.iva),$(".isrr").val(e.isrr),$(".ivar").val(e.ivar),$(".total").val(e.total),$("#contenedor-conceptos").html(e.output),$("input[name='cuenta-s']").val(e.subtotal),$("input[name='cuenta-d']").val(e.descuento),$("input[name='cuenta-iva']").val(e.iva),$("input[name='cuenta-isrr']").val(e.isrr),$("input[name='cuenta-ivar']").val(e.ivar),$("input[name='cuenta-t']").val(e.total),$("#accordion").accordion({collapsible:!0,heightStyle:"content",navigation:!0,active:!1}))}})};e(),$("#agregar-concepto").on("submit",(function(t){t.preventDefault();var n=!1;return $('[name="submit"]',"#agregar-concepto").attr("disabled","disabled"),!n&&(""==$('[name="concepto"]',"#agregar-concepto").val()||""==$('[name="descripcion"]',"#agregar-concepto").val()||""==$('[name="precio"]',"#agregar-concepto").val()||""==$('[name="cantidad"]',"#agregar-concepto").val()||""==$('[name="importe"]',"#agregar-concepto").val(0)?(swal({title:"Whoops!",text:"Ingresa toda la información del concepto",type:"error"}),void a($('[name="submit"]',"#agregar-concepto"))):(n=!0,void $.ajax({url:"ajax/cotizador",dataType:"JSON",type:"POST",data:$(this).serialize()+"&accion=agregar_concepto"}).done((a=>{200==a.status&&($('[name="concepto"]',"#agregar-concepto").val(""),$('[name="descripcion"]',"#agregar-concepto").val(""),$('[name="precio"]',"#agregar-concepto").val(""),$('[name="cantidad"]',"#agregar-concepto").val(1),$('[name="importe"]',"#agregar-concepto").val(0),o(),e())})).always((()=>{a($('[name="submit"]',"#agregar-concepto"),3e3)}))))})),$("body").on("click",".update-concepto",(function(e){var a=$(this).data("id"),t=$("#update-concepto-modal");$.ajax({url:"ajax/cotizador",type:"POST",dataType:"JSON",data:"accion=cargar_concepto&id="+a,success:function(e){200==e.status&&(t.modal("show"),$("input[name='id-modal']").val(e.concepto.id),$("input[name='concepto-modal']").val(e.concepto.concepto),$("textarea[name='descripcion-modal']").val(e.concepto.descripcion),$("input[name='precio-modal']").val(e.concepto.precio),$("input[name='cantidad-modal']").val(e.concepto.cantidad))}})})),0!==$(".update-concepto-submit").length&&$(".update-concepto-submit").on("click",(function(a){var t;t={id:$("input[name='id-modal']").val(),concepto:$("input[name='concepto-modal']").val(),descripcion:$("textarea[name='descripcion-modal']").val(),precio:$("input[name='precio-modal']").val(),cantidad:$("input[name='cantidad-modal']").val()},$.ajax({url:"ajax/cotizador",type:"post",dataType:"json",data:{accion:"actualizar_concepto",data:t},success:function(a){200==a.status&&(o("success","Actualizado con éxito"),e(),$("#update-concepto-modal").modal("hide"))}})})),$("body").on("click","button[data-accion='borrar_concepto']",(function(a){!function(a,t){swal({title:"¿Estás seguro?",text:"No se puede revertir esta acción",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"Cancelar"},(function(n){if(!n)return!1;$.ajax({url:"ajax/cotizador",type:"POST",dataType:"json",data:"accion="+t+"&id="+a,success:function(a){200==a.status&&(o("success","Borrado con éxito"),e())}})}))}($(this).data("id"),$(this).data("accion"))}))}function a(e,a=1500){return setTimeout((function(){e.removeAttr("disabled")}),a),!0}function t(){return $.ajax({url:"ajax/cotizador_interno",type:"post",dataType:"json",data:{action:"cargar"}}).done((function(e){$.each(e.conceptos,(function(e,a){$("[name='"+e+"']").val(a.precio)})),$.each(e.importes,(function(e,a){$("[name='"+e+"']").val(a),$("."+e).html("$"+a)}))}))}function o(e="success",a="Todo correcto",t=2e3){swal({title:"success"==e?"¡Bien!":"error"==e?"Whoops!":"¿Seguro?",text:a,type:e,timer:t})}function n(){$("select[name='equipos'] option:not(:first)").remove()}function r(e){$.each(e,(function(e,a){$("select[name='equipos']").append('<option value="'+a.id+'">'+a.tipo+", Modelo "+a.modelo+", Marca "+a.marca+", N° serie "+a.serie+"</option>")}))}function i(){let e=$(".wrapper_log");0!==e.length&&$.ajax({url:"ajax/do_get_log",type:"post",dataType:"json",data:{action:"get",hook:"jserp_hook"},beforeSend:function(){e.waitMe()}}).done((function(a){200===a.status&&(e.html(a.data),toastr.success(a.msg))})).fail((function(e){toastr.error("Hubo un error en la petición")})).always((function(){e.waitMe("hide")}))}0!==$("#generar-cotizacion").length&&($("select[name='equipos'] option:not(:first)").remove(),$("select[name='tipo_cotizacion'] , select[name='equipos']").val("none").attr("disabled","disabled"),$("select[name='cliente']").on("change",(function(e){if(n(),"none"==$(this).val())return swal({title:"Whoops!",text:"Selecciona un cliente valido",type:"error",timer:2e3}),n(),$("select[name='tipo_cotizacion'] , select[name='equipos']").val("none").attr("disabled","disabled"),!1;$("select[name='tipo_cotizacion']").removeAttr("disabled");var a=parseInt($(this).val());$.ajax({url:"ajax/cargar_equipos_de_cliente",type:"POST",dataType:"JSON",data:"id="+a+"&accion=cargar_equipos_de_cliente",success:function(e){200==e.status&&(n(),r(e.equipos))}})})),function(){if(0!==$("select[name='tipo_cotizacion']").length){var e=$("select[name='tipo_cotizacion']");$("body").on("change",e,(function(a){"3"==e.val()||"4"==e.val()?$("select[name='equipos']").removeAttr("disabled"):($("select[name='equipos']").attr("disabled","disabled"),$("select[name='equipos'] option:not(:first)").remove())}))}}(),$("input[name='persona']").on("change",(function(a){var t=$(this).val();return $.ajax({url:"ajax/cotizador",type:"POST",dataType:"JSON",data:{accion:"persona",persona:t},beforeSend:function(){$("body").waitMe()}}).done((a=>{console.log(a),200===a.status&&($("body").waitMe("hide"),e())})).fail((e=>{$("body").waitMe("hide"),alert("Hubo un error, intenta de nuevo."),console.log(e)})),!0})),$("select[name='descuento']").on("change",(function(a){if("none"===$(this).val())return o("warning","Selecciona una opción"),!1;var t=$(this).val();return $.ajax({url:"ajax/cotizador",type:"POST",dataType:"JSON",data:"accion=crear_descuento&descuento="+t,success:function(a){200==a.status&&e()}}),!0})),$("select[name='iva']").on("change",(function(a){var t=$(this).val();if("none"===$(this).val())return o("warning","Selecciona una opción"),!1;$.ajax({url:"ajax/cotizador",type:"POST",dataType:"JSON",data:"accion=crear_iva&iva="+t,success:function(a){if(200==a.status)return e(),!0}})})),$("#button-submit-cotizacion").on("click",(function(e){var a=$("#generar-cotizacion");return"none"==$("select[name='cliente']").val()?(o("error","¿Cuál es el cliente?"),e.preventDefault(),!1):"none"==$("select[name='tipo_cotizacion']").val()?(o("error","¿Qué tipo de cotización es?"),e.preventDefault(),!1):"none"==$("select[name='moneda']").val()?(o("error","¿Qué moneda se usará?"),e.preventDefault(),!1):"none"==$("select[name='vigencia']").val()?(o("error","¿Cuál será la vigencia?"),e.preventDefault(),!1):"none"==$("select[name='entrega']").val()?(o("error","¿Cuál será el tiempo de entrega?"),e.preventDefault(),!1):"none"==$("select[name='descuento']").val()?(o("error","¿Habrá descuento?"),e.preventDefault(),!1):"none"==$("select[name='iva']").val()?(o("error","¿Será facturado?"),e.preventDefault(),!1):void a.submit()}))),function(){if(0!==$("#generar-cotizacion-interna").length){t(),$("select[name='equipos'] option:not(:first)").remove(),$("select[name='tipo_cotizacion_interna'] , select[name='equipos']").val("none").attr("disabled","disabled"),$("select[name='cliente']").on("change",(function(e){if(n(),"none"==$(this).val())return swal({title:"Whoops!",text:"Selecciona un cliente valido",type:"error",timer:2e3}),n(),$("select[name='tipo_cotizacion_interna'] , select[name='equipos']").val("none").attr("disabled","disabled"),!1;$("select[name='tipo_cotizacion_interna']").removeAttr("disabled");var a=parseInt($(this).val());$.ajax({url:"ajax/cargar_equipos_de_cliente",type:"POST",dataType:"JSON",data:"id="+a+"&accion=cargar_equipos_de_cliente",success:function(e){200==e.status&&r(e.equipos)}})})),$(".cotizacion_interna").on("change",(function(e){"1"==$(this).val()?($("select[name='equipos'] option:not(:first)").remove(),$("select[name='equipos']").attr("disabled","disabled")):$("select[name='equipos']").removeAttr("disabled")})),$("[name='moneda']").on("change",(function(e){$.ajax({url:"ajax/cotizador_interno",type:"post",dataType:"json",data:{action:"set_moneda",moneda:$('[name="moneda"]').val()}}).done((function(e){200==e.status&&t()}))})),$("[name='tipo_cambio']").on("blur",(function(e){$.ajax({url:"ajax/cotizador_interno",type:"post",dataType:"json",data:{action:"set_tipo_cambio",tipoDeCambio:$('[name="tipo_cambio"]').val()}}).done((function(e){200==e.status&&t()}))})),$("#wrapper-cotizacion-interna"),$('.money:not([name="tipo_cambio"])').on("blur",(function(){!function(e,a){$.ajax({url:"ajax/cotizador_interno",type:"post",dataType:"json",data:{action:"agregar",concepto:e,precio:a}}).done((function(e){t()}))}($(this).attr("name"),$(this).val())}))}}(),0!==$("[data-accion='cargar-sucursales']").length&&$("[data-accion='cargar-sucursales']").on("change",(function(e){var a=$(this).val();$("[name='sucursal'] option:not(:first)").remove(),"none"==a?(e.preventDefault(),$("[name='sucursal']").attr("disabled","disabled")):$("[name='sucursal']").removeAttr("disabled"),$.ajax({url:"ajax/cargarSucursalesCliente",type:"POST",dataType:"JSON",data:{cliente:a,accion:"cargar_sucursales_con_id_cliente"},success:function(e){200==e.status&&$.each(e.sucursales,(function(e,a){$("[name='sucursal']").append('<option value="'+a.id+'">'+a.titulo+"</option>")})),e.status}})})),0!==$("#agregar-negocio").length&&($.ajax({url:"ajax/cargar_clientes",type:"post",dataType:"JSON",data:{action:"cargar_clientes"}}).done((function(e){$(".cliente-existente option:not(:first)").remove(),$.each(e.clientes,(function(e,a){$(".cliente-existente").append('<option value="'+a.id+'">'+a.razonSocial+" - "+a.nombre+"</option>")}))})),$.ajax({url:"ajax/get_negocios_data",type:"post",dataType:"JSON",data:{action:"cargar"}}).done((function(e){$("[name='lead_source'] option:not(:first)").remove(),$("[name='estado'] option:not(:first)").remove(),$.each(e.fuentes,(function(e,a){$('[name="lead_source"]').append('<option value="'+a+'">'+a+"</option>")})),$.each(e.estados,(function(e,a){$('[name="estado"]').append('<option value="'+a+'">'+a+"</option>")}))})),$("#cliente-existente").on("click",(function(){$(".wrapper-cliente-existente").toggle(),$(".wrapper-cliente-nuevo").toggle()})),$("#agregar-negocio").on("submit",(function(e){if($("#cliente-existente").is(":checked")){if(""==$('[name="razonSocial"]').val())return o("error","Razón social no valida"),!1;if(""==$('[name="nombre"]').val())return o("error","Nombre no valido"),!1;if(""==$('[name="rfc"]').val())return o("error","RFC no valido"),!1;if(""==$('[name="direccion"]').val())return o("error","Dirección no valida"),!1;if(""==$('[name="email"]').val())return o("error","E-mail no valido"),!1}else"none"==$('[name="id_cliente"]').val()&&o("error","Selecciona un cliente");return""==$('[name="titulo"]').val()?(o("error","Titulo no valido"),!1):""==$('[name="descripcion"]').val()?(o("error","Descripción no valida"),!1):""==$('[name="valor"]').val()?(o("error","Ingresa un monto valido"),!1):"none"==$('[name="estado"]').val()?(o("error","Selecciona un estado valido"),!1):void 0}))),function(){if(0!==$("#generar-orden-de-entrega").length){function e(){$.ajax({url:"ajax/orden_entrega",dataType:"JSON",type:"POST",data:{action:"cargar"}}).done((function(e){var a=$(".wrapper-listado-accesorios"),t="";if(e.status=200)return null!==e.accesorios?(a.html(""),t+='<div id="accordion">',$.each(e.accesorios,(function(e,a){t+="<h3>"+a.concepto+" - "+a.numeroSerie+"</h3>",t+='<div class="accordion-tab">',t+="<strong>Número de serie</strong>",t+="<p>"+a.numeroSerie+"</p>",t+="<strong>Número de parte</strong>",t+="<p>"+a.numeroParte+"</p>",t+="<strong>Cantidad</strong>",t+="<p>"+a.cantidad+"</p>",t+="<strong>Editar</strong>",t+="<p>",t+='<button class="btn btn-sm btn-success actualizar-accesorio" data-id="'+a.id+'"><i class="fa fa-edit"></i></button>',t+='<button class="btn btn-sm btn-danger eliminar-accesorio" data-id="'+a.id+'"><i class="fa fa-remove"></i></button>',t+="</p>",t+="</div>"})),t+="</div>",a.append(t),$("#accordion").accordion({collapsible:!0,heightStyle:"content",navigation:!0,active:!1}),!0):(a.html("<p>No hay accesorios disponibles.</p>"),!1)}))}e(),$(".submit-generar-orden-de-entrega").on("click",(function(e){e.preventDefault();var a=$("#generar-orden-de-entrega");if(0==$('[name="trabajoRealizado[]"]').val().length||"none"==$('[name="tipo"]').val()||"none"==$('[name="marca"]').val()||""==$('[name="modelo"]').val()||""==$('[name="serie"]').val()||"none"==$('[name="cliente"]').val()||"none"==$('[name="sucursal"]').val())return o("error","Completa todos los campos."),!1;$.ajax({url:"ajax/orden_entrega",dataType:"JSON",type:"POST",data:{action:"validar"}}).done((function(e){return 200==e.status?(a.submit(),!0):400==e.status?(o("error",e.msj),!1):void 0}))})),$("#agregar-accesorio").on("submit",(function(a){a.preventDefault();var t=$(this).getJSON();$.ajax({url:"ajax/orden_entrega",type:"POST",dataType:"JSON",data:{action:"agregar",data:t}}).done((function(a){if(200==a.status)return $('[name="concepto"]').val(""),$('[name="numeroSerie"]').val(""),$('[name="numeroParte"]').val(""),$('[name="cantidad"]').val(1),o("success","Accesorio agregado con éxito"),e(),!0}))})),$("body").on("click",".actualizar-accesorio",(function(){$.ajax({url:"ajax/orden_entrega",type:"post",dataType:"json",data:{action:"cargar_uno",id:$(this).data("id")}}).done((function(e){200==e.status&&($("#update-concepto-modal").modal("show"),$.each(e.accesorio,(function(e,a){$('[name="'+e+'-modal"]').val(a)})))}))})),$(".update-concepto-submit").on("click",(function(a){$.ajax({url:"ajax/orden_entrega",type:"POST",dataType:"JSON",data:{action:"actualizar",data:{id:$('[name="id-modal"]').val(),concepto:$('[name="concepto-modal"]').val(),numeroSerie:$('[name="numeroSerie-modal"]').val(),numeroParte:$('[name="numeroParte-modal"]').val(),cantidad:$('[name="cantidad-modal"]').val()}}}).done((function(a){if(200==a.status)return o("success",a.msj),$("#update-concepto-modal").modal("hide"),$('[name="id-modal"]').val(""),$('[name="concepto-modal"]').val(""),$('[name="numeroSerie-modal"]').val(""),$('[name="numeroParte-modal"]').val(""),$('[name="cantidad-modal"]').val(""),e(),!0}))})),$("body").on("click",".eliminar-accesorio",(function(){swal({title:"¿Estás seguro?",text:"No se puede revertir esta acción",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"Cancelar"},(function(a){if(!a)return!1;$.ajax({url:"ajax/orden_entrega",type:"post",dataType:"json",data:{action:"borrar",id:$(".eliminar-accesorio").data("id")}}).done((function(a){o("success",a.msj),e()}))}))}))}}(),$.fn.getJSON=function(){var e={},a=this.serializeArray();return $.each(a,(function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""})),e},function(){if(0!==$("#solicitar-anticipo").length){if($('[name="id_cliente"]').on("change",(function(e){$("[name='id_sucursal'] option:not(:first)").remove(),$("[name='id_equipo'] option:not(:first)").remove(),$.ajax({url:"ajax/cargarSucursalesCliente",type:"POST",dataType:"JSON",data:{cliente:$(this).val(),accion:"cargar_sucursales_con_id_cliente"}}).done((function(e){200==e.status&&$.each(e.sucursales,(function(e,a){$("[name='id_sucursal']").append('<option value="'+a.id+'">'+a.titulo+" - "+a.direccion+"</option>")}))})).fail((function(e){})),$.ajax({url:"ajax/cargar_equipos_de_cliente",type:"POST",dataType:"JSON",data:{id:$(this).val(),accion:"accion=cargar_equipos_de_cliente"}}).done((function(e){200==e.status&&$.each(e.equipos,(function(e,a){$("[name='id_equipo']").append('<option value="'+a.id+'">'+a.tipo+", Modelo "+a.modelo+", Marca "+a.marca+", N° serie "+a.serie+"</option>")}))})).fail((function(e){}))})),0!==$(".get-google-data").length&&$(".get-google-data").on("focusout",(function(e){5==$(this).val().length&&$.ajax({url:"https://maps.googleapis.com/maps/api/geocode/json?address="+$(this).val()+"&region=MX&key=AIzaSyBlj20qV1DIPTa-dy8C4KfaWvh0Mu_ae5o ",type:"POST",dataType:"JSON",data:{}}).done((function(e){"OK"==e.status&&($("[name='cp']").val(e.results[0].address_components[0].long_name),$("[name='colonia']").val(e.results[0].address_components[1].long_name),$("[name='ciudad']").val(e.results[0].address_components[2].long_name),$("[name='estado']").val(e.results[0].address_components[3].long_name))})).fail((function(e){swal("Whoops!","No hubo resultados","error")}))})),0!==$(".get-estados").length){var e=$(".get-estados");$.ajax({url:"assets/js/estados.json",type:"GET",dataType:"JSON",data:{},beforeSend:function(){}}).done((function(a){a&&$.each(a,(function(a,t){e.append('<option value="'+t.id+'">'+t.name+"</option>")}))})).fail((function(e){swal("Whoops!","Ocurrió un error.","error")})),$(".get-estados").on("change",(function(){$(".get-municipios option:not(:first)").remove();let e=$(".get-estados").val();if("none"==e)return console.log("No hay estado seleccionado"),!1;let a=$(".get-estados option:selected").html();$('[name="estado"]').val(a),$.ajax({url:"assets/js/municipios.json",type:"GET",dataType:"JSON",data:{},beforeSend:()=>{$("body").waitMe()}}).done((function(a){$("body").waitMe("hide");let t=[];for(var o=0;o<a.length;o++)a[o].state_id==e&&(t.push(a[o]),$(".get-municipios").append('<option value="'+a[o].name+'">'+a[o].name+"</option>"))})).fail((function(e){$("body").waitMe("hide"),swal("Whoops!","Ocurrió un error."+e,"error")}))}))}$("#solicitar-anticipo").on("submit",(function(e){if("none"==$(".get-estados").val()||"none"==$(".get-municipios").val())return swal("Whoops!","Es necesario seleccionar un Estado y Municipio o Ciudad","error"),!1}))}}(),0!==$(".clave_producto_sat").length&&$(".clave_producto_sat").select2({minimumInputLength:2,ajax:{url:"ajax/sat_search_clave_producto",dataType:"json",type:"GET",quietMillis:50,delay:250,placeholder:"Busca la clave de tu producto...",data:function(e){return{term:e}},processResults:function(e){return{results:$.map(e.data.items,(function(e){return{text:e.id+" - "+e.descripcion,slug:e.descripcion,id:e.id}}))}}}}),0!==$(".sat_search_unidades").length&&$(".sat_search_unidades").select2({minimumInputLength:2,ajax:{url:"ajax/sat_search_unidades",dataType:"json",type:"GET",quietMillis:50,delay:250,placeholder:"Busca la unidad de tu producto o servicio...",data:function(e){return{term:e}},processResults:function(e){return{results:$.map(e.data.items,(function(e){return{text:e.id+" - "+e.nombre,slug:e.nombre,id:e.id}}))}}}}),$("body").on("click",".do_get_log",i),i(),$("body").on("click",".do_delete_site_login_bg",(function(e){e.preventDefault();$(e.currentTarget);let a=$(".wrapper_site_login_bg");if(!confirm("¿Estás seguro?"))return;$.ajax({url:"ajax/do_delete_site_login_bg",type:"post",dataType:"json",cache:!1,data:{action:"delete",hook:"jserp_hook"},beforeSend:function(){l.loader()}}).done((function(e){200===e.status?(l.toast(e.msg),a.attr("src",e.data)):l.toast(e.msg,"error")})).fail((function(e){l.show_error()})).always((function(){l.loader("hide")}))})),$("body").on("click",".do_delete_sidebar_bg",(function(e){e.preventDefault();$(e.currentTarget);let a=$(".wrapper_sidebar_bg");if(!confirm("¿Estás seguro?"))return;$.ajax({url:"ajax/do_delete_sidebar_bg",type:"post",dataType:"json",cache:!1,data:{action:"delete",hook:"jserp_hook"},beforeSend:function(){l.loader()}}).done((function(e){200===e.status?(l.toast(e.msg),a.attr("src",e.data)):l.toast(e.msg,"error")})).fail((function(e){l.show_error()})).always((function(){l.loader("hide")}))})),$(".do_restart_opciones").on("click",(function(){$(this);let e=_csrf();if(!confirm("¿Estás completamente seguro? no hay vuelta atras"))return;$.ajax({url:"ajax/do_restart_opciones",type:"POST",dataType:"json",cache:!1,data:{hook:"jserp_hook",action:"POST",csrf:e},beforeSend:()=>{l.loader()}}).done((e=>{200===e.status?(l.toast(e.msg),l.reload()):l.toast(e.msg,"error")})).fail((e=>{l.show_error()})).always((()=>{l.loader("hide")}))})),$(".do_restart_database").on("click",(function(){$(this);let e=_csrf();if(!confirm("¿Estás completamente seguro? no hay vuelta atras"))return;$.ajax({url:"ajax/do_restart_database",type:"POST",dataType:"json",cache:!1,data:{hook:"jserp_hook",action:"POST",csrf:e},beforeSend:()=>{l.loader()}}).done((e=>{200===e.status?(l.toast(e.msg),l.reload()):l.toast(e.msg,"error")})).fail((e=>{l.show_error()})).always((()=>{l.loader("hide")}))})),$(".do_restart_system").on("click",(function(){$(this);let e=_csrf();if(!confirm("¿Estás completamente seguro? no hay vuelta atras"))return;$.ajax({url:"ajax/do_restart_system",type:"POST",dataType:"json",cache:!1,data:{hook:"jserp_hook",action:"POST",csrf:e},beforeSend:()=>{l.loader()}}).done((e=>{200===e.status?(l.toast(e.msg),l.reload()):l.toast(e.msg,"error")})).fail((e=>{l.show_error()})).always((()=>{l.loader("hide")}))})),$(".do_seed_fake_data").on("click",(function(){$(this);let e=_csrf();if(!confirm("¿Estás completamente seguro? no hay vuelta atras"))return;$.ajax({url:"ajax/do_seed_fake_data",type:"POST",dataType:"json",cache:!1,data:{hook:"jserp_hook",action:"POST",csrf:e},beforeSend:()=>{l.loader()}}).done((e=>{200===e.status?(l.toast(e.msg),l.reload()):l.toast(e.msg,"error")})).fail((e=>{l.show_error()})).always((()=>{l.loader("hide")}))})),$(".do_sepomex_api_rem").on("blur",(function(e){let a=$(this),t=$("#rem_colonia"),o=$("#rem_ciudad"),n=$("#rem_estado"),r=$(".wrapper_rem_cp"),i=a.val(),s=_csrf(),d="https://api-sepomex.hckdrk.mx/query/info_cp/"+i;if(i.length<4)return void l.toast("El código postal es demasiado corto, por favor completa el campo","error");$.ajax({url:d,type:"GET",dataType:"json",cache:!1,data:{hook:"jserp_hook",action:"POST",csrf:s},beforeSend:()=>{l.loader()}}).done((e=>{0!==e.length?(r.hide(),t.html(""),t.removeAttr("disabled"),$.each(e,(function(e,a){console.log(a),t.append('<option value="'+a.response.asentamiento+'">'+a.response.asentamiento+"</option>"),o.val(a.response.municipio),o.attr("disabled",!1),n.val(a.response.estado),n.attr("disabled",!1)}))):l.toast("El código postal no es válido, intenta de nuevo","error")})).fail((e=>{t.html(""),t.attr("disabled",!0),o.val(""),o.attr("disabled",!0),n.val(""),n.attr("disabled",!0),r.addClass("text-danger"),r.html("<small>Código postal no válido</small>"),r.show(),l.show_error()})).always((()=>{l.loader("hide")}))})),$(".do_sepomex_api_des").on("blur",(function(e){let a=$(this),t=$("#des_colonia"),o=$("#des_ciudad"),n=$("#des_estado"),r=$(".wrapper_des_cp"),i=a.val(),s=_csrf(),d="https://api-sepomex.hckdrk.mx/query/info_cp/"+i;if(i.length<4)return void l.toast("El código postal es demasiado corto, por favor completa el campo","error");$.ajax({url:d,type:"GET",dataType:"json",cache:!1,data:{hook:"jserp_hook",action:"POST",csrf:s},beforeSend:()=>{l.loader()}}).done((e=>{0!==e.length?(r.hide(),t.html(""),t.removeAttr("disabled"),$.each(e,(function(e,a){console.log(a),t.append('<option value="'+a.response.asentamiento+'">'+a.response.asentamiento+"</option>"),o.val(a.response.municipio),o.attr("disabled",!1),n.val(a.response.estado),n.attr("disabled",!1)}))):l.toast("El código postal no es válido, intenta de nuevo","error")})).fail((e=>{t.html(""),t.attr("disabled",!0),o.val(""),o.attr("disabled",!0),n.val(""),n.attr("disabled",!0),r.addClass("text-danger"),r.html("<small>Código postal no válido</small>"),r.show(),l.show_error()})).always((()=>{l.loader("hide")}))}))})),0!==$("#sketchpad").length){$("#sketchpad").width($("#sketchpad").parent().width()),new Sketchpad({element:"#sketchpad",width:700,height:500});$(".btn-undo"),$(".btn-redo")}0!==$(".ladda-button").length&&Ladda.bind(".ladda-button",{callback:function(e){var a=0,t=setInterval((function(){a=Math.min(a+.1*Math.random(),1),e.setProgress(a),1===a&&(e.stop(),clearInterval(t))}),200)}}),function(){if(0!==$(".todo-wrapper").length){var e,a,t=$(".todo-form"),o=$('[name="task"]',t);t.on("submit",(function(a){if(a.preventDefault(),e=o.val(),console.log(e),""==e)return swal("Whoops!","Ingresa una tarea válida.","error"),!1;$.ajax({url:"ajax/todo",type:"POST",dataType:"JSON",data:{accion:"agregar",task:t.getJSON()}}).done((function(e){return 201==e.status?(swal("Bien!",""+e.msj,"success"),setTimeout((()=>{window.location.reload()}),1500),!0):200==e.status&&1==e.error?(swal("Whoops!",""+e.msj,"error"),o.val(""),!0):void 0})).fail((function(e){console.debug(e)})).then((function(){}))})),$('[data-accion="completar"]').on("click",(function(e){e.preventDefault(),a=$(this).data("id"),$.ajax({url:"ajax/todo",type:"POST",dataType:"JSON",data:{accion:"completar",id:a}}).done((function(e){return 201==e.status?(swal("Bien!",""+e.msj,"success"),setTimeout((()=>{window.location.reload()}),1500),!0):200==e.status&&1==e.error?(swal("Whoops!",""+e.msj,"error"),o.val(""),!0):void 0})).fail((function(e){console.debug(e)})).then((function(){}))}))}}();$(document).ajaxComplete((function(e,a,t){$('[data-toggle="tooltip"]').not("[data-original-title]").tooltip()}));lightbox.option({resizeDuration:200,wrapAround:!0,albumLabel:"Imagen %1 de %2",positionFromTop:50}),$(document).ready((function(){function e(){if(0===$(".random-quote").length)return!1;$.ajax({url:"https://talaikis.com/api/quotes/random/",type:"GET",dataType:"JSON",cache:!1}).done((e=>{e&&($(".random-quote").html(e.quote),$(".random-quote-author").html("Por "+e.author))})).fail((e=>!1))}0!==$(".money").length&&$(".money").mask("#,##0.00",{reverse:!0}),$.widget.bridge("uitooltip",$.ui.tooltip),$('[data-toggle="tooltip"]',"body").tooltip({placement:"top"}),0!==$("#data-table").length&&$("#data-table").DataTable({columnDefs:[{targets:"data-ellipsis",render:function(e,a,t){return e.length>25?e.substr(0,20)+"…":e}}],responsive:!0,aaSorting:[],language:{lengthMenu:"Mostar _MENU_ registros por página",zeroRecords:"Sin resultados",info:"Página _PAGE_ de _PAGES_",infoEmpty:"No hay registros disponibles",infoFiltered:"(filtrando de _MAX_ registros totales)",thousands:",",paginate:{first:"Primera",last:"Última",next:"Siguiente",previous:"Anterior"},search:"Buscar",loadingRecords:"Cargando..."},dom:"lBfrtip",buttons:[{extend:"copy",className:"btn-primary",text:"Copiar"},{extend:"csv",className:"btn-primary"},{extend:"excel",className:"btn-primary"},{extend:"pdf",className:"btn-primary"},{extend:"print",className:"btn-primary",text:"Imprimir"}]}),0!==$(".select2-basic-single").length&&$(".select2-basic-single").select2({placeholder:{id:"none",text:"Selecciona o busca una opción"},allowClear:!1}),0!==$(".confirmacion-requerida").length&&$("body").on("click",".confirmacion-requerida",(function(e){e.preventDefault();var a=$(this).attr("href");swal({title:"¿Estás seguro?",text:"No se puede revertir esta acción",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"Cancelar"},(function(e){if(console.log(e),1!=e)return!1;window.location=a}))})),myDropzone(),0!==$(".upload-btn-wrapper").length&&$(".upload-btn-input").on("change",(function(){$(this).prop("files");let e=$(this).val().split("\\").pop();$(this).next(".upload-btn").html("Archivo: "+e)})),e(),$(".refresh-quote").on("click",(a=>{a.preventDefault(),e()}));var a,t,o,n;window.location.href;0!==$(".equipos-datatable").length&&($(".dt-buttons").append('<button class="btn btn-primary generate-qr-codes">Generar QR</button>'),$(".generate-qr-codes").on("click",(function(e){var a=Math.floor(Date.now()/1e3);$.ajax({url:"ajax/generarQrs",type:"POST",dataType:"JSON",data:{action:"generate",timecheck:a},beforeSend:function(){$("body").waitMe({color:"#007bff"})}}).done((e=>{200==e.status&&(console.log("QRs generados con éxito."),swal("¡Éxito!",""+e.msj,"success"),setTimeout((function(){window.location.reload()}),2e3)),400==e.status&&swal("Whoops!",""+e.msj,"error"),$("body").waitMe("hide")})).fail((e=>{console.log("SECURITY CHECK: Acceso denegado."),$("body").waitMe("hide")}))})));(0!==$("[data-accion='borrar']").length&&$("body").on("click","[data-accion='borrar']",(function(e){e.preventDefault();var a=$(this).attr("href");swal({title:"¿Estás seguro?",text:"No se puede revertir esta acción",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"Cancelar"},(function(e){1==e&&(window.location=a)}))})),0!==$("#datepicker-inline").length&&$("#datepicker-inline").datepicker({language:"es",todayHighlight:!0}),$("#calendar").fullCalendar({dayClick:function(){alert("A day has been clicked!")}}),0!==$("#summernote, .summernote").length&&$("#summernote, .summernote").summernote({placeholder:"Escribe tu mensaje",tabsize:2,height:300}),0!==$("#direccion-correos").length)&&$(".smtp-test-connection").on("click",(e=>{e.preventDefault(),a=$('[name="site_smtp_host"]').val(),t=$('[name="site_smtp_port"]').val(),o=$('[name="site_smtp_email"]').val(),n=$('[name="site_smtp_password"]').val(),""!==a?""!==o?""!==n?$.ajax({url:"ajax/smtp-test",type:"POST",dataType:"json",data:{hook:"js_hook",action:"smtp-test",host:a,port:t,email:o,password:n},beforeSend:()=>{$("body").waitMe()}}).done((e=>{200===e.status?toastr.success(e.msg,"¡Excelente!"):toastr.error(e.msg,"Whoops!")})).fail((e=>{toastr.error("Hubo un error desconocido.","Whoops!")})).always((()=>{$("body").waitMe("hide")})):toastr.error("Ingresa una contraseña válida.","Whoops!"):toastr.error("Ingresa una dirección de email.","Whoops!"):toastr.error("Ingresa un host válido.","Whoops!")}));0!==$(".upcoming_event_carasol").length&&$(".upcoming_event_carasol").owlCarousel({autoplay:!0,loop:!0,margin:30,autoplayTimeout:5e3,autoplayHoverPause:!0,lazyLoad:!0,center:!0,nav:!0,navText:['<i class="material-icons badge f-s-18" data-color="purple">arrow_back</i> ',' &nbsp;<i class="material-icons badge f-s-18" data-color="purple">arrow_forward</i>'],navClass:["owl-prev","owl-next"],responsive:{0:{items:1},600:{items:1},1100:{items:1},1200:{items:1}}}),$('[name="sidebar_alignment"]').on("change",(function(e){e.preventDefault();let a=$(this).val(),t=$(".sidebar"),o=$(".main-panel");$("body").waitMe({waitTime:700,onClose:function(){"left"===a?(t.removeClass("sidebar-right").addClass("sidebar-left"),o.removeClass("main-panel-left").addClass("main-panel-right")):"right"===a&&(t.removeClass("sidebar-left").addClass("sidebar-right"),o.removeClass("main-panel-right").addClass("main-panel-left"))}})})),$('[name="sidebar_opacity"]').on("change",(function(e){e.preventDefault();$(this);let a=$('[name="sidebar_opacity"]:checked').length>0,t=$(".sidebar-background");$(".sidebar").data("image");$.ajax({url:"ajax/do_get_sidebar_bg",type:"get",dataType:"json",data:{hook:"jserp_hook",action:"get"},beforeSend:function(){$("body").waitMe()}}).done((function(e){200===e.status?a?t.attr("style","background-image: url("+e.data+")"):t.attr("style",""):console.log(e.msg)})).fail((function(e){toastr.error("Hubo un error en la petición")})).always((function(){$("body").waitMe("hide")}))})),$("body").on("click",".btn_requires_confirmation",(function(e){e.preventDefault();let a=$(this).closest("form");swal({title:"¿Estás seguro?",text:"No se puede revertir esta acción",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, proseguir",cancelButtonText:"Cancelar"},(function(e){if(1!=e)return!1;a.submit()}))}))})),$(document).ready((function(){$("input[name='sitetheme']").on("change",(function(){var e=$(this).val();$("body").waitMe({effect:"bounce",waitTime:700,onClose:function(){$("#sitetheme").attr("href","assets/css/theme-"+e+".css")}})}))}))}();
//# sourceMappingURL=main.min.js.map